#include "main.h"

//客户端传来 USER Cliuser;
//经服务器接收后  USER Seruser;//

void Showuser(USER *Seruser)
{
	printf("Seruser.iID = %d\n",Seruser->iID);
	printf("Seruser.szPass = %s\n",Seruser->szPass);
}

//





//单聊写入文件
int Addonecaht(CHAT *Serchat)
{
	int fd;
	fd = open((char *)Serchat->iID,O_RDWR|O_CREAT,0664);//要修改
	if(fd<0)
    {
         printf("open file %s\n",strerror(errno));
         return -1;
    }
    printf("open sucess\n");
 
    ssize_t len,ret;
	len = sizeof(CHAT);
	lseek(fd,0L,SEEK_END);
    while(len > 0)
    {
         ret = write(fd,(CHAT *)Serchat,len);
         if(ret < 0)
         {
		     perror("write()");
 		     return -1;
 	     }
         len = len - ret;    
    }
  //  Show(Serchat);
    close(fd);
    return 0;
}

int Addgroupcaht(CHAT *Serchat)
{
	printf("加入到群聊记录\n");
	return 0;

}
