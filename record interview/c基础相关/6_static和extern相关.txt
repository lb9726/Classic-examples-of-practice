面试题：static有什么作用？

答：在C语言中，static主要定义全局静态变量，定义局部静态变量，定义静态函数

 一、       定义全局静态变量 ：在全局变量前面加上关键字static，该全局变量变成了全局静态变量。全局静态变量有以下特点：

（1）       在全局数据区内分配内存

（2）       如果没有初始化，其默认值为0

（3）       该变量在本文件内从定义开始到文件结束可见

 二、       定义局部静态变量：在局部静态变量前面加上关键字static，该局部变量便成了静态局部变量。静态局部变量有以下特点:

（1）       该变量在全局数据区分配内存

（2）       如果不显示初始化，那么将被隐式初始化为0

（3）       它始终驻留在全局数据区，直到程序运行结束

（4）       其作用域为局部作用域，当定义它的函数或语句块结束时，其作用域随之结束。

  三、       定义静态函数：在函数的返回类型加上static关键字，函数即被定义成静态函数。静态函数有以下特点：

（1）       静态函数只能在本源文件中使用

（2）       在文件作用域中声明的inline函数默认为static

                说明：静态函数只是一个普通的全局函数，只不过受static限制，他只能在文件坐在的编译单位内使用，不能在其他编译单位内使用。

在C++语言中新增了两种作用：定义静态数据成员或静态函数成员

  一，       定义静态数据成员。静态数据成员有如下特点：

（1）       内存分配：在程序的全局数据区分配

（2）       初始化和定义：静态数据成员定义时要分配空间，所以不能在类声明中初始化。

  二，       静态成员函数。静态成员函数与类相联系，不与类的对象相联系。静态成员函数不能访问非静态数据成员。原因很简单，非静态数据成员属于特定的类实例，静态成员函数主要用于对静态数据成员的操作。

（1）       静态成员函数没有this指针。


A.c 和B.c两个c文件中使用了两个相同名字的static变量,编译的时候会不会有问题?这两个static变量会保存到哪里(栈还是堆或者其他的)?
【标准答案】static的全局变量,表明这个变量仅在本模块中有意义,不会影响其他模块。
他们都放在静态数据区,但是编译器对他们的命名是不同的。如果要使变量在其他模块也有意义的话,需要使用extern关键字。


static有什么用途?(请至少说明两种)
【标准答案】
1.限制变量的作用域(static全局变量);
2.设置变量的存储域(static局部变量)。
1)在函数体,一个被声明为静态的变量在这一函数被调用过程中维持其值不变。
2) 在模块内(但在函数体外),一个被声明为静态的变量可以被模块内所用函数访问,但不能被模块外其它函数访问。它是一个本地的全局变量。
3) 在模块内,一个被声明为静态的函数只可被这一模块内的其它函数调用。那就是,这个函数被限制在声明它的模块的本地范围内使用


如何引用一个已经定义过的全局变量?
【标准答案】可以用引用头文件的方式,也可以用extern关键字,如果用引用头文件方式来引用某个在
头文件中声明的全局变理,假定你将那个变量写错了,那么在编译期间会报错,如果你用extern方式引用时,
假定你犯了同样的错误,那么在编译期间不会报错,而在连接期间报错。


全局变量可不可以定义在可被多个.C文件包含的头文件中?为什么?

【标准答案】可以,在不同的C文件中以static形式来声明同名全局变量。
可以在不同的C文件中声明同名的全局变量,前提是其中只能有一个C文件中对此变量赋初值,此时连接不会出错。

static全局变量与普通的全局变量有什么区别?
【标准答案】 static全局变量只初使化一次,防止在其他文件单元中被引用;

static局部变量和普通局部变量有什么区别
标准答案】static局部变量只被初始化一次,下一次依然是上一次结果值;

#include<stdio.h>
#include<stdlib.h>
#include<string.h>

void increasing()
{   
    static int i = 0;
    i = i + 1;
    printf("i = %d\n", i);
    return;
}

void increasing2()
{   
    int j = 0;
    j = j + 1;
    printf("j = %d\n", j);
    return;
}

int main()
{
    increasing();
    increasing();
    increasing2();
    increasing2();
    return 0;
}
运行结果：
i = 1
i = 2
j = 1
j = 1

static函数与普通函数有什么区别?
【标准答案】static函数在内存中只有一份,普通函数在每个被调用中维持一份拷贝

某文件中定义的静态全局变量(或称静态外部变量)其作用域是 ()?
A.只限某个函数 B.本文件
C.跨文件 D.不限制作用域
【参考答案】B。
静态全局变量则限制了其作用域,即只在定义该变量的源文件内有效, 在同一源程序的其它源文件中不能使用它。
由于静态全局变量的作用域局限于一个源文件内,只能为该源文件内的函数公用, 因此可以避免在其它源文件中引起错误。

















